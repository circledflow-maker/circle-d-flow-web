<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Events - Circle D Flow</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }

        /* Video Background Styles */
        #video-bg {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            object-fit: cover;
            opacity: 0.6;
        }

        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 13, 15, 0.7);
            /* midnight with opacity */
            z-index: -1;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Function to render events
            function renderDynamicEvents() {
                const E = window.Events;
                const container = document.querySelector('.grid.md\\:grid-cols-2.lg\\:grid-cols-3');

                if (E && container) {
                    // Force refresh from storage
                    const events = E.getEvents();

                    // Filter for our dynamic events (id starts with evt_)
                    const dynamicEvents = events.filter(e => e.id.startsWith('evt_'));

                    if (dynamicEvents.length > 0) {
                        const html = dynamicEvents.map(evt => `
                        <div class="group relative bg-[#1A1625] rounded-xl overflow-hidden border border-white/5 hover:border-electric/50 transition-all duration-300 hover:-translate-y-1 shadow-lg hover:shadow-electric/20">
                            <div class="aspect-video overflow-hidden relative">
                                 <div class="absolute top-4 right-4 z-10 bg-black/60 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold text-white border border-white/10">
                                    ${evt.ticketType === 'external' ? 'External' : (evt.price > 0 ? evt.price + '‚Ç¨' : 'Free')}
                                </div>
                                <img src="${evt.image || 'Assets/images/hero_bg.jpg'}" alt="${evt.title}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700">
                                <div class="absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-[#1A1625] to-transparent"></div>
                            </div>
                            
                            <div class="p-6 relative">
                                <div class="flex items-center gap-3 text-xs font-bold tracking-widest uppercase mb-3">
                                    <span class="text-electric">${new Date(evt.date).toLocaleDateString()}</span>
                                    <span class="w-1 h-1 bg-white/20 rounded-full"></span>
                                    <span class="text-mist">${evt.location}</span>
                                </div>
                                
                                <h3 class="text-2xl font-serif font-bold text-white mb-2 group-hover:text-electric transition-colors leading-tight">
                                    ${evt.title}
                                </h3>
                                
                                <p class="text-mist text-sm mb-6 line-clamp-2">
                                    ${evt.description}
                                </p>
                                
                                <div class="flex flex-col gap-3 border-t border-white/5 pt-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <div class="w-6 h-6 rounded-full bg-gradient-to-br from-electric to-purple-600"></div>
                                        <span class="text-xs font-bold text-white">${evt.organizer || 'Circle D Flow'}</span>
                                    </div>
                                    ${evt.externalUrl ?
                                `<a href="${evt.externalUrl}" target="_blank" onclick="window.visitExternal('${evt.externalUrl}', '${evt.id}')" class="w-full py-3 bg-electric hover:bg-electric/90 text-white text-center rounded-xl font-bold uppercase tracking-widest text-xs transition-all flex items-center justify-center gap-2">
                                            Get Tickets <span class="material-symbols-outlined text-base">open_in_new</span>
                                        </a>
                                        <button onclick="claimXP('${evt.id}')" class="w-full py-2 bg-white/5 hover:bg-white/10 border border-white/10 text-mist hover:text-white rounded-xl text-xs font-bold uppercase tracking-widest transition-all">
                                            Claim XP (Attendance)
                                        </button>`
                                :
                                `<button onclick="buyTicket('${evt.id}')" class="w-full py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-bold uppercase tracking-widest text-xs transition-all flex items-center justify-center gap-2">
                                            Get Tickets <span class="material-symbols-outlined text-base">local_activity</span>
                                        </button>`
                            }
                                </div>
                            </div>
                        </div>
                         `).join('');

                        container.insertAdjacentHTML('afterbegin', html);
                    }
                }
            }

            renderDynamicEvents();

            // External Visit Logic
            window.visitExternal = function (url, id) {
                if (window.Gamification) window.Gamification.addXP(20, 'External Event Visit');
            }

            // Claim XP Logic
            window.claimXP = function (id) {
                const confirmed = confirm("Did you attend this event? Uploading proof (simulated)...");
                if (confirmed) {
                    alert('Proof uploaded! An admin will verify your attendance shortly (+50 XP).');
                }
            }


            // Ticket Buy Implementation
            // State for Ticket Modal
            const ticketState = {
                eventId: null,
                event: null,
                step: 1,
                user: { name: '', email: '' }
            };

            window.buyTicket = function (id) {
                const event = window.Events ? window.Events.getEvents().find(e => e.id === id) : null;
                if (!event) return;

                ticketState.eventId = id;
                ticketState.event = event;
                ticketState.step = 1;

                // Reset UI
                document.getElementById('ticket-modal').classList.remove('hidden');
                updateTicketModalUI();
            }

            window.updateTicketModalUI = function () {
                // Update Event Details
                document.getElementById('tkt-event-title').textContent = ticketState.event.title;
                document.getElementById('tkt-event-date').textContent = new Date(ticketState.event.date).toLocaleDateString();
                document.getElementById('tkt-event-price').textContent = ticketState.event.price > 0 ? ticketState.event.price + '‚Ç¨' : 'Free';

                // Manage Steps
                ['tkt-step-1', 'tkt-step-2', 'tkt-step-3'].forEach((id, idx) => {
                    const el = document.getElementById(id);
                    if (idx + 1 === ticketState.step) el.classList.remove('hidden');
                    else el.classList.add('hidden');
                });

                // Check Auth for Step 2
                if (ticketState.step === 2) {
                    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                    const authSec = document.getElementById('tkt-auth-section');
                    const guestSec = document.getElementById('tkt-guest-section');

                    if (isLoggedIn) {
                        authSec.classList.remove('hidden');
                        guestSec.classList.add('hidden');
                        // Mock User Data (In real app, fetch from profile)
                        document.getElementById('tkt-user-name').textContent = "Alex Weber";
                        // Pre-fill state
                        ticketState.user.name = "Alex Weber";
                        ticketState.user.email = "alex.weber@example.com";
                    } else {
                        authSec.classList.add('hidden');
                        guestSec.classList.remove('hidden');
                    }
                }
            }

            window.closeTicketModal = function () {
                document.getElementById('ticket-modal').classList.add('hidden');
            }

            window.nextTicketStep = function () {
                if (ticketState.step === 2) {
                    // Validate Guest Inputs if not logged in
                    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                    if (!isLoggedIn) {
                        const n = document.getElementById('guest-name').value;
                        const e = document.getElementById('guest-email').value;
                        if (!n || !e) {
                            alert("Please fill in all fields.");
                            return;
                        }
                        ticketState.user.name = n;
                        ticketState.user.email = e;
                    }
                }
                ticketState.step++;
                updateTicketModalUI();
            }

            window.confirmTicketPurchase = function (method) {
                const btn = event.currentTarget;
                const oldText = btn.innerHTML;
                btn.innerHTML = "Processing...";

                setTimeout(() => {
                    if (method === 'card') {
                        // Redirect to Stripe (Using the event specific link)
                        const stripeLink = ticketState.event.stripeLink;

                        if (stripeLink) {
                            // Save State to sessionStorage so we recall it on return
                            // This simplifies Stripe Config: User just needs to redirect to ?payment_success=true
                            const pendingTicket = {
                                eventId: ticketState.event.id,
                                user: ticketState.user,
                                timestamp: Date.now()
                            };
                            sessionStorage.setItem('pending_ticket_purchase', JSON.stringify(pendingTicket));

                            window.location.href = stripeLink;
                        } else {
                            alert("Payment link not configured for this event. Please contact support.");
                            btn.innerHTML = oldText;
                        }
                    } else {
                        // Manual Payment - Create Ticket Immediately
                        if (window.Events) window.Events.purchaseTicket(ticketState.eventId, ticketState.user);
                        if (window.Gamification) window.Gamification.addXP(ticketState.event.price > 0 ? 100 : 50, 'Ticket Purchase');

                        alert(`Success! Ticket for ${ticketState.event.title} successfully reserved. Please complete the transfer instructions sent to ${ticketState.user.email}.`);
                        window.closeTicketModal();
                        btn.innerHTML = oldText;
                    }
                }, 1500);
            }

            // Check for Payment Success Callback
            // Now simpler: Just check for flag and retrieve data from storage
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('payment_success') === 'true') {
                const pendingData = sessionStorage.getItem('pending_ticket_purchase');

                if (pendingData && window.Events) {
                    try {
                        const ticketData = JSON.parse(pendingData);

                        // Double check freshness (optional, e.g. < 1 hour)
                        if (Date.now() - ticketData.timestamp < 3600000) {
                            window.Events.purchaseTicket(ticketData.eventId, ticketData.user);
                            if (window.Gamification) window.Gamification.addXP(100, 'Ticket Purchase');

                            // Clear Storage
                            sessionStorage.removeItem('pending_ticket_purchase');

                            // Clean URL
                            const cleanUrl = window.location.pathname.split('/').pop() || 'events.html';
                            window.history.replaceState({}, document.title, cleanUrl);

                            // Show Success
                            setTimeout(() => {
                                alert("Payment Confirmed! Your ticket for " + (window.Events.getEvents().find(e => e.id === ticketData.eventId)?.title || "the event") + " has been issued.");
                            }, 500);
                        }
                    } catch (e) {
                        console.error("Error processing ticket:", e);
                    }
                }
            }

            // Check for hash (Original Logic preserved)
            if (window.location.hash) {
                const target = document.querySelector(window.location.hash);
                if (target) {
                    setTimeout(() => {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }, 100);
                }
            }
        });
    </script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#8A2BE2",
                        "background-light": "#f7f5f8",
                        "background-dark": "#191022",
                        "mystic-gold": "#FFD700"
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">

    <!-- Video Background -->
    <video autoplay loop muted playsinline id="video-bg">
        <source src="Assets/video/hero.mp4" type="video/mp4">
    </video>
    <div class="bg-overlay"></div>

    <div class="relative w-full overflow-x-hidden">
        <!-- Top Navigation Bar -->
        <!-- Top Navigation Bar -->
        <!-- Custom Cursor -->
        <div id="cursor"
            class="fixed w-12 h-12 pointer-events-none z-[200] transition-transform duration-100 hidden md:block">
            <img src="Assets/images/logo.png" class="w-full h-full object-contain drop-shadow-lg" alt="Cursor">
        </div>

        <!-- Mobile Wave Overlay -->
        <div id="mobile-wave-menu"
            class="fixed inset-0 bg-background-dark/95 backdrop-blur-xl z-[100] transform translate-y-full opacity-0 pointer-events-none transition-all duration-500 ease-out flex flex-col items-center justify-center space-y-8">
            <button id="mobile-close-btn" class="absolute top-8 right-8 text-white/50 hover:text-white">
                <span class="material-symbols-outlined text-4xl">close</span>
            </button>

            <a href="index.html"
                class="text-4xl font-serif font-bold text-white hover:text-electric transition-colors">Home</a>
            <a href="events.html"
                class="text-4xl font-serif font-bold text-white hover:text-electric transition-colors">Events</a>
            <a href="marketplace.html"
                class="text-4xl font-serif font-bold text-white hover:text-electric transition-colors">Marketplace</a>
            <a href="blog.html"
                class="text-4xl font-serif font-bold text-white hover:text-electric transition-colors">Community</a>

            <div class="h-px w-24 bg-white/20 my-4"></div>

            <a href="login.html" id="mobile-auth-link"
                class="text-2xl text-mystic-gold font-bold tracking-widest uppercase">Enter the Circle</a>
        </div>

        <!-- The Flow Bar (Fixed Navigation) -->
        <header id="flow-bar"
            class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[95%] max-w-5xl bg-black/60 backdrop-blur-md border border-purple-500/30 rounded-full px-6 py-3 flex items-center justify-between shadow-[0_0_20px_rgba(0,0,0,0.5)] transition-all duration-300 hover:border-purple-500/60">
            <!-- Logo -->
            <a href="index.html" class="flex items-center gap-3 group">
                <img src="Assets/images/logo.png" alt="Circle D Flow"
                    class="w-8 h-8 object-contain group-hover:rotate-12 transition-transform">
                <span
                    class="text-white font-bold tracking-tight hidden md:block group-hover:text-mystic-gold transition-colors">Circle
                    D Flow</span>
            </a>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-8 h-full">
                <!-- Trinity Dropdown -->
                <div class="relative group h-10 flex items-center">
                    <button
                        class="nav-link flex items-center gap-1 focus:outline-none uppercase tracking-widest text-xs font-bold text-white group-hover:text-mystic-gold transition-colors">
                        The Trinity <span class="material-symbols-outlined text-sm">expand_more</span>
                    </button>
                    <!-- Dropdown Content -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 pt-6 opacity-0 translate-y-2 pointer-events-none group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto transition-all duration-300">
                        <div
                            class="flex gap-4 p-4 bg-black/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl w-[400px]">
                            <a href="kiss-your-heart.html"
                                class="flex-1 flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-white/5 transition-colors group/card">
                                <span class="text-2xl group-hover/card:scale-110 transition-transform">üëÅÔ∏è</span>
                                <span
                                    class="text-[10px] font-bold uppercase tracking-wider text-electric">Visuals</span>
                            </a>
                            <a href="live-from-the-underground.html"
                                class="flex-1 flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-white/5 transition-colors group/card">
                                <span class="text-2xl group-hover/card:scale-110 transition-transform">üéß</span>
                                <span
                                    class="text-[10px] font-bold uppercase tracking-wider text-purple-400">Sound</span>
                            </a>
                            <a href="african-queen-kitchen.html"
                                class="flex-1 flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-white/5 transition-colors group/card">
                                <span class="text-2xl group-hover/card:scale-110 transition-transform">ü•ò</span>
                                <span class="text-[10px] font-bold uppercase tracking-wider text-amber">Taste</span>
                            </a>
                        </div>
                    </div>
                </div>

                <a href="events.html"
                    class="nav-link uppercase tracking-widest text-xs font-bold text-white hover:text-mystic-gold transition-colors">Events</a>
                <a href="marketplace.html"
                    class="nav-link uppercase tracking-widest text-xs font-bold text-white hover:text-mystic-gold transition-colors">Marketplace</a>
                <a href="blog.html"
                    class="nav-link uppercase tracking-widest text-xs font-bold text-white hover:text-mystic-gold transition-colors">Community</a>
            </nav>

            <!-- Auth / Mobile Toggle -->
            <div class="flex items-center gap-4">
                <!-- Desktop Auth -->
                <div id="desktop-auth" class="hidden md:block">
                    <!-- Will be populated by JS -->
                    <a href="login.html"
                        class="px-6 py-2 bg-white text-midnight font-bold rounded-full text-xs uppercase tracking-widest hover:bg-mystic-gold hover:scale-105 transition-all shadow-[0_0_10px_rgba(255,255,255,0.3)]">
                        Enter the Circle
                    </a>
                </div>

                <!-- Mobile Hamburger -->
                <button id="hamburger-btn" class="md:hidden text-white z-50 relative focus:outline-none group">
                    <svg class="w-8 h-8 group-hover:text-mystic-gold transition-all duration-300" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <main class="container mx-auto px-6 py-10 md:py-20">
            <!-- Events Content -->
            <div class="flex flex-wrap justify-between gap-3 p-4 pt-12 text-center items-center flex-col">
                <div class="flex min-w-72 flex-col gap-3">
                    <p class="text-white text-5xl md:text-6xl font-black leading-tight tracking-[-0.033em]">Jam Sessions
                    </p>
                    <p class="text-white/60 text-lg font-normal leading-normal">Tune into the Flow of the City</p>
                </div>
            </div>
            <div class="flex gap-3 p-3 overflow-x-auto justify-center mb-8">
                <button
                    class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 pl-4 pr-2 hover:bg-white/20 transition-colors">
                    <p class="text-white text-sm font-medium leading-normal">All Dates</p>
                    <span class="material-symbols-outlined text-white text-base">expand_more</span>
                </button>
                <button
                    class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 pl-4 pr-2 hover:bg-white/20 transition-colors">
                    <p class="text-white text-sm font-medium leading-normal">By Genre</p>
                    <span class="material-symbols-outlined text-white text-base">expand_more</span>
                </button>
                <button
                    class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 pl-4 pr-2 hover:bg-white/20 transition-colors">
                    <p class="text-white text-sm font-medium leading-normal">By Artist</p>
                    <span class="material-symbols-outlined text-white text-base">expand_more</span>
                </button>
                <button
                    class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 pl-4 pr-2 hover:bg-white/20 transition-colors">
                    <p class="text-white text-sm font-medium leading-normal">Near Me</p>
                    <span class="material-symbols-outlined text-white text-base">my_location</span>
                </button>
            </div>

            <!-- Time Map -->
            <div class="flex px-4 py-8 mb-12">
                <div class="w-full bg-center bg-no-repeat aspect-[2/1] bg-cover rounded-lg object-cover relative overflow-hidden"
                    data-alt="A mystical, dark-themed map of Lisbon with glowing points of interest."
                    data-location="Lisbon"
                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCkI3idYs8vMmv2WjDH-7yx5FSUAP4CFEboMwHs0mUq1dbEEkhE2lc_RBVGgcoYqwm9h6960LcTqIqTHIb1D-AFH5n7EmxhaGfIEsu9f6DoNis3pq7GaOM-9U4WV7zTLkWSm76hQGFtgsAuHoMmvv20-yssBmS5RCL6b-Y1zprMRu50hPINwnNBktMPAd0z2UVpDCltTIoxxJlyzeLmxhDGXSA_w4SN8teB2hlYwJ0bvtk6WLU58nIEcYTuys3gIswF2bTf00C9IUc');">
                    <div class="absolute inset-0 bg-background-dark/70 backdrop-blur-sm"></div>
                    <div class="absolute top-[40%] left-[30%]">
                        <div class="w-4 h-4 rounded-full bg-mystic-gold absolute animate-ping"></div>
                        <div class="w-4 h-4 rounded-full bg-mystic-gold absolute"></div>
                    </div>
                    <div class="absolute top-[65%] left-[55%]">
                        <div class="w-3 h-3 rounded-full bg-mystic-gold absolute animate-ping delay-500"></div>
                        <div class="w-3 h-3 rounded-full bg-mystic-gold absolute"></div>
                    </div>
                    <div class="absolute top-[25%] left-[70%]">
                        <div class="w-5 h-5 rounded-full bg-mystic-gold absolute animate-ping delay-1000"></div>
                        <div class="w-5 h-5 rounded-full bg-mystic-gold absolute"></div>
                    </div>
                    <div
                        class="absolute bottom-4 left-4 bg-background-dark/50 backdrop-blur-md p-3 rounded-lg border border-white/10">
                        <h3 class="text-white font-bold text-lg">Time Map: Lisbon</h3>
                        <p class="text-white/70 text-sm">Live Jam Session Radar</p>
                    </div>
                </div>
            </div>

            <h2 class="text-white text-3xl font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Upcoming Sessions
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4">
                <!-- Event 1 -->
                <div
                    class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.05] hover:bg-white/[.08] transition-all cursor-pointer">
                    <div class="flex flex-col gap-2">
                        <p class="text-sm font-medium text-primary">Fri, 28 Aug 2026 @ 21:00</p>
                        <h3 class="text-xl font-bold text-white">Cosmic Echoes Jam</h3>
                        <div class="flex items-center gap-2 text-white/70">
                            <span class="material-symbols-outlined text-base">location_on</span>
                            <p class="text-sm">Alley Cat Music Club</p>
                        </div>
                    </div>
                    <p class="text-sm text-white/60 font-light">A journey through psychedelic soundscapes and ambient
                        grooves. Bring your own flow.</p>
                    <div class="mt-auto flex flex-col gap-4">
                        <div class="flex items-center gap-2">
                            <p class="text-xs text-white/70 font-medium">Artists:</p>
                            <div class="flex -space-x-2">
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuArFgth_7zCdLwyRevQ8QV0Qg0UNxyTJkpXgfIEx3c1_cx6-KaJstLjX1czWC2mJi4pgGGHL-679bPhHtlMmdm-Kwdy931kCsDeJQBw_fHigjmj30_ZYgJMLLhTNvV3yeeS9155vJDpwVHm9oZa8MBn2E1JbnoGcZWcgUTTU_eVBYTbnxJ1TFCQ-NeYk5ZMm4kqi2LzmoKqZoLjh18sGlTq0TlTpquopRCwPeZyp5QLzkRrSVOSG925v22V8Bg43AaMqtfi_j_Yt4Q');">
                                </div>
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuC3yOUueQ3DaBlqVoIcwwSvgnwa41txB3T2_JQ6d5cwKCw-pfQV3Rbu0kn6b6hWFmb5lVbclj7pwP1gfGGNcYGHtZvZtoIwkPSSBLcrVym9p9WdWUoBLfScBTLjFRsppYdkP1XMvtu89PtPuvTVC6UpIAq8WrjIVlKZgQv1rI9oHrNiU5feilJV_kQrzAIkwyjb8Wg5ZGjFVCvWCh6-ueNrfXY2hMgvLdmSsX9-3-ZgDZB8z-xdaErFvuZSVatGSmVrqveUfYRzVfw');">
                                </div>
                            </div>
                        </div>
                        <button
                            class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors gap-2">
                            <span class="material-symbols-outlined text-lg">join_inner</span>
                            <span class="truncate">Portal Jump</span>
                        </button>
                    </div>
                </div>
                <!-- Event 2 -->
                <div
                    class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.05] hover:bg-white/[.08] transition-all cursor-pointer">
                    <div class="flex flex-col gap-2">
                        <p class="text-sm font-medium text-primary">Sat, 29 Aug 2026 @ 22:00</p>
                        <h3 class="text-xl font-bold text-white">Rhythmic Alchemy Session</h3>
                        <div class="flex items-center gap-2 text-white/70">
                            <span class="material-symbols-outlined text-base">location_on</span>
                            <p class="text-sm">The Groove Temple</p>
                        </div>
                    </div>
                    <p class="text-sm text-white/60 font-light">Fusing lo-fi beats with live jazz improvisation. A
                        session for the soul.</p>
                    <div class="mt-auto flex flex-col gap-4">
                        <div class="flex items-center gap-2">
                            <p class="text-xs text-white/70 font-medium">Artists:</p>
                            <div class="flex -space-x-2">
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDfy_igaqM9igpFe1jSYXJ4CRaAAPtBxMDmELIFh04Uh41Dbwri3sAVNOnp2gVAxLGyjP0XSNfMZu90Kg9fubn18jJD4pwh0Zr06RcJgC-d79Yf3k3ic4cVQ2CM_TYCg2HvPEVIjFPHagE_HGhXenZu-LSSM-Igh3ylr1XDvlmQ4OpGxc2aMhtBZMfeuVmZB5NS0a-r080ekduMIcbzok8no353LsqJsPKeNoYHDWxIEHvC1pTPtLACvKfJBLvw55xuWZrLacCfQks');">
                                </div>
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDvEn9P3cyon3c3TRGTnW9KLlyyJexFuOAeIALp1noQ_uqAAXG6m0yoVzJLLsTIjdy-9cgzaVQBrUxBb37UjM8CeDcGsjlgWkZs2tV3Wul6pWWOJE6uQZn6BFe3JwZe1bIKO4OXrY5Qg7GIueMvhgj53uCgXy-Jl6xdYFUfWGSwzu1er_mfJtT_eEaRpcWnlQ9aggk3tC16uk042E7ezY1CJoZ7NCFI9tYuXCgKB-MmTWc87AWjdvasY46bZFGxRFKojpfSj2uMuTA');">
                                </div>
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAsY_P3x_itqBorpdn0kULjs6NSd62ql5w5k9JXjg5bQ4BWj8PE-MVVaDME0dJPSUVSMbMdxciItX2XoAcof1wWfvV2Xk91pezorZGCqd5LSxAvEebwjMb3YlB1I9bVizRHh3LKGzrE9nCJTLN9KXTrk7iLmdnI_Vm9roS3dotdutHL7Mr3qpDJIORYX5pw5MfKDe8d3k-cCbyiB2mWp-1Ao74hG-tyOLl_7yF9zTQRxj3-ILKvdAa2TorVVgMXLfaaPgA5MZZOGNk');">
                                </div>
                            </div>
                        </div>
                        <button
                            class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors gap-2">
                            <span class="material-symbols-outlined text-lg">join_inner</span>
                            <span class="truncate">Portal Jump</span>
                        </button>
                    </div>
                </div>
                <!-- Event 3 -->
                <div
                    class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.05] hover:bg-white/[.08] transition-all cursor-pointer">
                    <div class="flex flex-col gap-2">
                        <p class="text-sm font-medium text-primary">Sun, 30 Oct @ 19:30</p>
                        <h3 class="text-xl font-bold text-white">Future Funk Nexus</h3>
                        <div class="flex items-center gap-2 text-white/70">
                            <span class="material-symbols-outlined text-base">location_on</span>
                            <p class="text-sm">Synthwave Station</p>
                        </div>
                    </div>
                    <p class="text-sm text-white/60 font-light">High-energy electronic jam with a touch of 80s
                        nostalgia. Expect neon lights and heavy bass.</p>
                    <div class="mt-auto flex flex-col gap-4">
                        <div class="flex items-center gap-2">
                            <p class="text-xs text-white/70 font-medium">Artists:</p>
                            <div class="flex -space-x-2">
                                <div class="size-6 rounded-full border-2 border-background-dark bg-cover"
                                    data-alt="Avatar of an artist"
                                    style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBBpynIA8ry-yU7SV7OBSS9g0kGrUtbTK_R1wtJjA8LGLlSop6SrUDYeZSWhYD1aQpVMocmUEk4OHbdSjsKzzmLt-yIPDnXv8CEgKk6fl_udiqQCbgBEQilyIP0W9PhKFMnPDe6eu9kDhTZ_S6IYDD9n6BLRPx-utK8St1fgvZYJ1HWuoRS1jwbCUdNMWb_pJZX2D6hFuOIJQWydmxrEU8Yknq6WKA0gspLrM0cOJeVlaa939CAwiUsh41iM2Rnw6mq6XYcSoBK8d4');">
                                </div>
                            </div>
                        </div>
                        <button
                            class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors gap-2">
                            <span class="material-symbols-outlined text-lg">join_inner</span>
                            <span class="truncate">Portal Jump</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="flex flex-col gap-8 p-4 mt-16">
                <div class="flex flex-col items-center text-center gap-3">
                    <h2 class="text-white text-3xl font-bold leading-tight tracking-[-0.015em]">Chronicle Portal</h2>
                    <p class="text-white/60 text-lg font-normal leading-normal max-w-2xl">Revisit the echoes of past
                        sessions. Filter the flow of memories by date, theme, or artist to find inspiration and relive
                        the magic.</p>
                </div>
                <div class="flex flex-wrap items-center justify-center gap-4">
                    <div class="relative">
                        <input
                            class="bg-white/5 border border-white/10 rounded-full h-10 pl-10 pr-4 text-white placeholder-white/40 text-sm focus:ring-primary focus:border-primary transition-colors"
                            placeholder="Search by theme..." type="text" />
                        <span
                            class="material-symbols-outlined text-white/50 absolute left-3 top-1/2 -translate-y-1/2 text-lg">search</span>
                    </div>
                    <button
                        class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/5 border border-white/10 px-4 hover:bg-white/10 transition-colors">
                        <p class="text-white text-sm font-medium leading-normal">Filter by Date</p>
                        <span class="material-symbols-outlined text-white/70 text-base">calendar_month</span>
                    </button>
                    <button
                        class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/5 border border-white/10 px-4 hover:bg-white/10 transition-colors">
                        <p class="text-white text-sm font-medium leading-normal">Filter by Artist</p>
                        <span class="material-symbols-outlined text-white/70 text-base">mic</span>
                    </button>
                </div>
                <div class="relative pl-8 py-8">
                    <div
                        class="absolute left-[31px] top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary/50 via-mystic-gold/50 to-primary/50">
                    </div>
                    <!-- Timeline Item 1 -->
                    <div class="relative mb-12">
                        <div
                            class="absolute -left-8 top-1 w-6 h-6 rounded-full bg-mystic-gold/50 border-2 border-mystic-gold/80 flex items-center justify-center shadow-[0_0_15px_rgba(251,191,36,0.5)]">
                            <div class="w-2 h-2 rounded-full bg-mystic-gold"></div>
                        </div>
                        <p class="text-mystic-gold/80 text-sm font-bold mb-2">September 2024</p>
                        <div
                            class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.03] opacity-70 hover:opacity-100 hover:bg-white/[.05] hover:border-primary/50 hover:shadow-[0_0_20px_rgba(127,13,242,0.3)] transition-all cursor-pointer">
                            <h3 class="text-xl font-bold text-white/80">Solar Flare Sonata</h3>
                            <p class="text-sm text-white/50 font-light">An evening of warm, sun-drenched melodies and
                                acoustic vibes.</p>
                            <div class="flex items-center gap-2 text-white/60">
                                <span class="material-symbols-outlined text-base">history</span>
                                <p class="text-sm">View Details &amp; Recordings</p>
                            </div>
                        </div>
                    </div>
                    <!-- Timeline Item 2 -->
                    <div class="relative mb-12">
                        <div
                            class="absolute -left-8 top-1 w-6 h-6 rounded-full bg-mystic-gold/50 border-2 border-mystic-gold/80 flex items-center justify-center shadow-[0_0_15px_rgba(251,191,36,0.5)]">
                            <div class="w-2 h-2 rounded-full bg-mystic-gold"></div>
                        </div>
                        <p class="text-mystic-gold/80 text-sm font-bold mb-2">August 2024</p>
                        <div
                            class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.03] opacity-70 hover:opacity-100 hover:bg-white/[.05] hover:border-primary/50 hover:shadow-[0_0_20px_rgba(127,13,242,0.3)] transition-all cursor-pointer">
                            <h3 class="text-xl font-bold text-white/80">Lunar Tides Lo-fi</h3>
                            <p class="text-sm text-white/50 font-light">Chilled beats and moonlit improvisations that
                                calmed the city's pulse.</p>
                            <div class="flex items-center gap-2 text-white/60">
                                <span class="material-symbols-outlined text-base">history</span>
                                <p class="text-sm">View Details &amp; Recordings</p>
                            </div>
                        </div>
                    </div>
                    <!-- Timeline Item 3 -->
                    <div class="relative">
                        <div
                            class="absolute -left-8 top-1 w-6 h-6 rounded-full bg-mystic-gold/50 border-2 border-mystic-gold/80 flex items-center justify-center shadow-[0_0_15px_rgba(251,191,36,0.5)]">
                            <div class="w-2 h-2 rounded-full bg-mystic-gold"></div>
                        </div>
                        <p class="text-mystic-gold/80 text-sm font-bold mb-2">July 2024</p>
                        <div
                            class="flex flex-col gap-4 p-5 rounded-lg border border-white/10 bg-white/[.03] opacity-70 hover:opacity-100 hover:bg-white/[.05] hover:border-primary/50 hover:shadow-[0_0_20px_rgba(127,13,242,0.3)] transition-all cursor-pointer">
                            <h3 class="text-xl font-bold text-white/80">Quantum Bass Drop</h3>
                            <p class="text-sm text-white/50 font-light">Exploring the deep frequencies and rhythmic
                                paradoxes of electronic music.</p>
                            <div class="flex items-center gap-2 text-white/60">
                                <span class="material-symbols-outlined text-base">history</span>
                                <p class="text-sm">View Details &amp; Recordings</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-background-dark border-t border-primary/20">
            <div class="container mx-auto px-6 py-12">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div class="md:col-span-1">
                        <div class="flex items-center gap-4 text-white mb-4">
                            <div class="size-6">
                                <img src="Assets/images/logo.png" alt="Circle D Flow Logo"
                                    class="w-full h-full object-contain">
                            </div>
                            <h2 class="text-white text-lg font-bold leading-tight">Circle D Flow</h2>
                        </div>
                        <p class="text-white/60 text-sm">Art, Science &amp; Community. Lisbon.</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-mystic-gold mb-4">Navigation</h4>
                        <ul class="space-y-2 text-sm">
                            <li><a class="text-white/80 hover:text-white" href="index.html#about">Philosophy</a></li>
                            <li><a class="text-white/80 hover:text-white" href="#">Events</a></li>
                            <li><a class="text-white/80 hover:text-white" href="index.html#community">Circle D Flow</a>
                            </li>
                            <li><a class="text-white/80 hover:text-white" href="index.html#contact">Contact</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-mystic-gold mb-4">Services</h4>
                        <ul class="space-y-2 text-sm">
                            <li><a class="text-white/80 hover:text-white" href="index.html">Kiss Your Heart</a></li>
                            <li><a class="text-white/80 hover:text-white" href="outbreak_tunes.html">Outbreak Tunes</a>
                            </li>
                            <li><a class="text-white/80 hover:text-white" href="index.html#portfolio">Portfolio</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-mystic-gold mb-4">Join the Flow</h4>
                        <p class="text-white/60 text-sm mb-4">Get updates on events and projects directly in your inbox.
                        </p>
                        <form class="flex gap-2">
                            <input
                                class="w-full bg-white/10 border-primary/50 text-white rounded-md text-sm focus:ring-mystic-gold focus:border-mystic-gold"
                                placeholder="Your E-Mail" type="email" />
                            <button
                                class="h-10 px-4 bg-primary text-white font-bold rounded-md text-sm hover:opacity-90"
                                type="submit">Send</button>
                        </form>
                    </div>
                </div>
                <div class="mt-12 border-t border-primary/20 pt-8 text-center text-sm text-white/50">
                    <p>¬© 2024 Circle D Flow. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Ticket Purchase Modal -->
    <div id="ticket-modal" class="fixed inset-0 z-[100] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-background-dark/90 backdrop-blur-sm" onclick="closeTicketModal()"></div>

        <!-- Modal Content -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-[#1A1625] border border-white/10 rounded-2xl shadow-2xl overflow-hidden p-6">
            <button onclick="closeTicketModal()" class="absolute top-4 right-4 text-white/50 hover:text-white">
                <span class="material-symbols-outlined">close</span>
            </button>

            <!-- Header -->
            <div class="text-center mb-6 border-b border-white/5 pb-4">
                <h3 class="text-xl font-bold text-white mb-1">Get Tickets</h3>
                <p class="text-sm text-mystic-gold" id="tkt-event-title">Event Title</p>
                <div class="flex justify-center gap-4 mt-2 text-xs text-white/60">
                    <span id="tkt-event-date">Date</span>
                    <span>‚Ä¢</span>
                    <span id="tkt-event-price">Price</span>
                </div>
            </div>

            <!-- Step 1: Confirm Details -->
            <div id="tkt-step-1" class="space-y-6">
                <div class="bg-white/5 rounded-lg p-4 border border-white/5">
                    <p class="text-white/80 text-sm text-center">You are about to secure your spot for this experience.
                    </p>
                </div>
                <button onclick="nextTicketStep()"
                    class="w-full py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary/90 transition-colors">
                    Continue
                </button>
            </div>

            <!-- Step 2: User Details -->
            <div id="tkt-step-2" class="hidden space-y-6">
                <!-- Member View -->
                <div id="tkt-auth-section" class="hidden text-center space-y-4">
                    <div
                        class="w-16 h-16 rounded-full bg-mystic-gold/20 flex items-center justify-center mx-auto text-mystic-gold border border-mystic-gold/50">
                        <span class="material-symbols-outlined text-3xl">person</span>
                    </div>
                    <div>
                        <p class="text-white font-bold text-lg" id="tkt-user-name">User Name</p>
                        <p class="text-white/50 text-xs">Logged In Member</p>
                    </div>
                    <p class="text-white/60 text-sm">Your account details will be used for this ticket.</p>
                </div>

                <!-- Guest View -->
                <div id="tkt-guest-section" class="hidden space-y-4">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-white/70 uppercase tracking-wider">Full Name</label>
                        <input id="guest-name" type="text"
                            class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors"
                            placeholder="Enter your name">
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-white/70 uppercase tracking-wider">Email Address</label>
                        <input id="guest-email" type="email"
                            class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors"
                            placeholder="Enter your email">
                    </div>
                </div>

                <button onclick="nextTicketStep()"
                    class="w-full py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary/90 transition-colors">
                    Proceed to Payment
                </button>
            </div>

            <!-- Step 3: Payment -->
            <div id="tkt-step-3" class="hidden space-y-6">
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="confirmTicketPurchase('card')"
                        class="p-3 border border-white/10 rounded-lg hover:border-mystic-gold hover:bg-white/5 transition-colors flex flex-col items-center gap-2 group">
                        <span
                            class="material-symbols-outlined text-white/60 group-hover:text-mystic-gold">credit_card</span>
                        <span class="text-xs font-bold text-white">Card</span>
                    </button>
                    <button onclick="confirmTicketPurchase('mbway')"
                        class="p-3 border border-white/10 rounded-lg hover:border-mystic-gold hover:bg-white/5 transition-colors flex flex-col items-center gap-2 group">
                        <span
                            class="material-symbols-outlined text-white/60 group-hover:text-mystic-gold">smartphone</span>
                        <span class="text-xs font-bold text-white">MBWAY</span>
                    </button>
                    <button onclick="confirmTicketPurchase('paypal')"
                        class="p-3 border border-white/10 rounded-lg hover:border-mystic-gold hover:bg-white/5 transition-colors flex flex-col items-center gap-2 group">
                        <span
                            class="material-symbols-outlined text-white/60 group-hover:text-mystic-gold">payments</span>
                        <span class="text-xs font-bold text-white">PayPal</span>
                    </button>
                </div>
                <p class="text-xs text-center text-white/40">Secure payment encryption enabled.</p>
            </div>
        </div>
    </div>

    <!-- Audio Player (Right) -->
    <div class="fixed bottom-8 right-8 z-50">
        <button id="audio-btn"
            class="w-12 h-12 rounded-full border border-white/20 flex items-center justify-center hover:border-electric transition-colors bg-background-dark/50 backdrop-blur-sm">
            <!-- Treble Clef Icon -->
            <svg id="audio-icon-on" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24"
                style="color: white;">
                <path
                    d="M11.5 2C11.5 2 11.5 2 11.5 2C10.67 2 10 2.67 10 3.5C10 4.33 10.67 5 11.5 5C12.33 5 13 4.33 13 3.5C13 3.42 12.99 3.34 12.98 3.26C13.6 3.64 14 4.31 14 5.08C14 6.27 12.94 7.21 11.77 7.21C11.68 7.21 11.59 7.2 11.5 7.2C9.57 7.2 8 8.77 8 10.7C8 12.63 9.57 14.2 11.5 14.2C11.5 14.2 11.5 14.2 11.5 14.2C12.33 14.2 13 13.53 13 12.7C13 11.87 12.33 11.2 11.5 11.2C10.67 11.2 10 11.87 10 12.7C10 12.78 10.01 12.86 10.02 12.94C9.4 12.56 9 11.89 9 11.12C9 9.93 10.06 8.99 11.23 8.99C11.32 8.99 11.41 9 11.5 9C13.43 9 15 7.43 15 5.5C15 3.57 13.43 2 11.5 2ZM11.5 15.5C9.57 15.5 8 17.07 8 19C8 20.93 9.57 22.5 11.5 22.5C13.43 22.5 15 20.93 15 19C15 17.07 13.43 15.5 11.5 15.5ZM11.5 20.5C10.67 20.5 10 19.83 10 19C10 18.17 10.67 17.5 11.5 17.5C12.33 17.5 13 18.17 13 19C13 19.83 12.33 20.5 11.5 20.5Z" />
            </svg>
            <svg id="audio-icon-off" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" style="color: white;">
                <path
                    d="M11.5 2C11.5 2 11.5 2 11.5 2C10.67 2 10 2.67 10 3.5C10 4.33 10.67 5 11.5 5C12.33 5 13 4.33 13 3.5C13 3.42 12.99 3.34 12.98 3.26C13.6 3.64 14 4.31 14 5.08C14 6.27 12.94 7.21 11.77 7.21C11.68 7.21 11.59 7.2 11.5 7.2C9.57 7.2 8 8.77 8 10.7C8 12.63 9.57 14.2 11.5 14.2C11.5 14.2 11.5 14.2 11.5 14.2C12.33 14.2 13 13.53 13 12.7C13 11.87 12.33 11.2 11.5 11.2C10.67 11.2 10 11.87 10 12.7C10 12.78 10.01 12.86 10.02 12.94C9.4 12.56 9 11.89 9 11.12C9 9.93 10.06 8.99 11.23 8.99C11.32 8.99 11.41 9 11.5 9C13.43 9 15 7.43 15 5.5C15 3.57 13.43 2 11.5 2ZM11.5 15.5C9.57 15.5 8 17.07 8 19C8 20.93 9.57 22.5 11.5 22.5C13.43 22.5 15 20.93 15 19C15 17.07 13.43 15.5 11.5 15.5ZM11.5 20.5C10.67 20.5 10 19.83 10 19C10 18.17 10.67 17.5 11.5 17.5C12.33 17.5 13 18.17 13 19C13 19.83 12.33 20.5 11.5 20.5Z"
                    opacity="0.3" />
                <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2" />
            </svg>
        </button>
        <audio id="bg-music" loop>
            <source src="Assets/audio/ambient.mp3" type="audio/mpeg">
        </audio>
    </div>

    <script>
        // Audio Player Logic
        const audioBtn = document.getElementById('audio-btn');
        const bgMusic = document.getElementById('bg-music');
        const iconOn = document.getElementById('audio-icon-on');
        const iconOff = document.getElementById('audio-icon-off');

        // Try to restore state
        const isPlaying = localStorage.getItem('musicPlaying') === 'true';
        if (isPlaying) {
            bgMusic.play().then(() => {
                iconOn.classList.remove('hidden');
                iconOff.classList.add('hidden');
            }).catch(() => {
                // Autoplay might be blocked
                console.log("Autoplay blocked");
            });
        }

        audioBtn.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.play();
                iconOn.classList.remove('hidden');
                iconOff.classList.add('hidden');
                localStorage.setItem('musicPlaying', 'true');
            } else {
                bgMusic.pause();
                iconOn.classList.add('hidden');
                iconOff.classList.remove('hidden');
                localStorage.setItem('musicPlaying', 'false');
            }
        });
    </script>

    <script src="gamification.js"></script>
    <script src="events-manager.js"></script>
    <script src="script.js"></script>
</body>

</html>