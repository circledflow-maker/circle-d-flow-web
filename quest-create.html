<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Quest | Circle D Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #0F0A13;
            color: white;
        }

        .font-serif {
            font-family: 'Playfair Display', serif;
        }

        .text-electric {
            color: #9A4DFF;
        }
    </style>
</head>

<body class="bg-[#0F0A13] text-white min-h-screen relative overflow-x-hidden">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 transition-all duration-300 border-b border-white/5 bg-[#0F0A13]/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-3">
                <img src="Assets/images/logo.png" alt="CDF Logo" class="w-8 h-8 object-contain">
                <span class="font-serif font-bold text-xl tracking-wide">Circle D Flow</span>
            </a>
            <a href="dashboard.html" class="text-white/60 hover:text-white transition-colors">Back to Dashboard</a>
        </div>
    </nav>

    <main class="pt-32 pb-20 px-6 max-w-2xl mx-auto">
        <div class="mb-10">
            <span class="text-electric text-xs font-bold uppercase tracking-widest">Community Mission Control</span>
            <h1 class="text-4xl font-serif font-bold mb-2">Issue a Quest</h1>
            <p class="text-mist">Challenge the community. Offer XP. Expand the Flow.</p>
        </div>

        <form id="create-quest-form" class="space-y-6">
            <label class="block">
                <span class="text-sm font-bold uppercase tracking-widest text-electric mb-2 block">Quest Title</span>
                <input type="text" name="title" required
                    class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-electric focus:ring-1 focus:ring-electric outline-none transition-all placeholder:text-white/20"
                    placeholder="e.g. Find the Hidden Mural">
            </label>

            <label class="block">
                <span class="text-sm font-bold uppercase tracking-widest text-electric mb-2 block">Objective /
                    Instructions</span>
                <textarea name="description" rows="3" required
                    class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-electric focus:ring-1 focus:ring-electric outline-none transition-all placeholder:text-white/20"
                    placeholder="What must be done?"></textarea>
            </label>

            <div class="grid grid-cols-2 gap-6">
                <label class="block">
                    <span class="text-sm font-bold uppercase tracking-widest text-electric mb-2 block">XP Reward</span>
                    <select name="xpReward"
                        class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-electric outline-none">
                        <option value="15">15 XP (Small)</option>
                        <option value="50">50 XP (Medium)</option>
                        <option value="100">100 XP (Epic)</option>
                    </select>
                </label>
                <label class="block">
                    <span class="text-sm font-bold uppercase tracking-widest text-electric mb-2 block">Type</span>
                    <select name="type"
                        class="w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-electric outline-none">
                        <option value="social">Social</option>
                        <option value="location">Location Check-in</option>
                        <option value="creative">Creative Task</option>
                    </select>
                </label>
            </div>

            <button type="submit"
                class="w-full py-4 bg-gradient-to-r from-electric to-purple-800 hover:from-electric/90 hover:to-purple-900 text-white font-bold uppercase tracking-widest rounded-lg transition-all shadow-lg transform hover:-translate-y-1">
                Publish Quest
            </button>
        </form>
    </main>

    <script src="gamification.js"></script>
    <script src="quest-manager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const G = window.Gamification;
            const Q = window.Quests;

            // Mock Level Check
            const level = G ? G.getLevel() : 0;
            if (level < 4) {
                alert("You must be Level 4+ to issue quests. (For demo we proceed)");
            }

            const form = document.getElementById('create-quest-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);

                Q.createQuest({
                    title: formData.get('title'),
                    description: formData.get('description'),
                    xpReward: parseInt(formData.get('xpReward')),
                    type: formData.get('type'),
                    creator: 'User' // In real app, current user
                });

                // Award XP to creator for engagement
                if (G) G.addXP(20, 'Created Quest');

                alert("Quest Published!");
                window.location.href = 'dashboard.html';
            });
        });
    </script>
</body>

</html>