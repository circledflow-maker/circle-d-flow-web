<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Services & Investment - Circle D Flow</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }
        /* Video Background Styles */
        #video-bg {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            object-fit: cover;
            opacity: 0.6;
        }
        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 13, 15, 0.7); /* midnight with opacity */
            z-index: -1;
        }
        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #FFD700;
            cursor: pointer;
            margin-top: -10px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }
    </style>
    <script id="tailwind-config">
      if (window.tailwind) {
          tailwind.config = {
            darkMode: "class",
            theme: {
              extend: {
                colors: {
                  "primary": "#8A2BE2",
                  "background-light": "#f7f5f8",
                  "background-dark": "#191022",
                  "mystic-gold": "#FFD700"
                },
                fontFamily: {
                  "display": ["Plus Jakarta Sans", "sans-serif"]
                },
                borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
              },
            },
          }
      } else {
          console.warn("Tailwind CSS not loaded");
      }
    </script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">

<!-- Video Background -->
<video autoplay loop muted playsinline id="video-bg">
    <source src="Assets/video/hero.mp4" type="video/mp4">
</video>
<div class="bg-overlay"></div>

<div class="relative w-full overflow-x-hidden">
    <!-- Top Navigation Bar -->
    <header class="sticky top-0 z-50 w-full bg-background-dark/80 backdrop-blur-lg">
        <nav class="container mx-auto flex items-center justify-between whitespace-nowrap px-6 py-3">
            <div class="flex items-center gap-4 text-white">
                <a href="index.html" class="hover:opacity-80 transition-opacity">
                    <img src="Assets/images/logo.png" alt="Circle D Flow Logo" class="size-10 object-contain">
                </a>
                <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Circle D Flow</h2>
            </div>
            <div class="hidden items-center gap-8 md:flex">
                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="index.html#about">Philosophy</a>
                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="events.html">Events</a>
                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="blog.html">Community</a>
                
                <!-- Kiss Your Heart Dropdown -->
                <div class="relative group">
                    <button class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors flex items-center gap-1 focus:outline-none">
                        Kiss Your Heart
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </button>
                    <div class="absolute top-full left-1/2 -translate-x-1/2 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                        <div class="bg-background-dark/95 backdrop-blur-md border border-primary/30 rounded-lg p-4 min-w-[200px] flex flex-col gap-3 shadow-xl text-left">
                            <span class="text-xs font-bold text-mystic-gold uppercase tracking-wider mb-1">Services</span>
                            <a href="services-artist.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Artist</a>
                            <a href="services-brand.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Brand</a>
                            <a href="services-individual.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Individual</a>
                            <a href="services-wedding.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Wedding</a>
                            <a href="services-citytrip.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Citytrip</a>
                            <a href="services-community.html" class="text-sm text-white/80 hover:text-mystic-gold transition-colors pl-2">Community</a>
                            <div class="h-px bg-white/10 my-1"></div>
                            <a href="booking.html" class="text-sm font-bold text-mystic-gold hover:text-white transition-colors">Book Now</a>
                            <a href="home_original.html#portfolio" class="text-sm font-bold text-white hover:text-mystic-gold transition-colors">Portfolio</a>
                        </div>
                    </div>
                </div>

                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="outbreak_tunes.html">Outbreak Tunes</a>
                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="partners.html">Live on Stage Map</a>
                <a class="text-white text-sm font-medium leading-normal hover:text-mystic-gold transition-colors" href="contact.html">Contact</a>
            </div>
            <div class="flex items-center gap-4">
                <a href="login.html" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-mystic-gold text-background-dark text-sm font-bold leading-normal tracking-[0.015em] hover:opacity-90 transition-opacity">
                    <span class="truncate">Member Login</span>
                </a>
                <button id="menu-btn" class="md:hidden text-white">
                    <span class="material-symbols-outlined">menu</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-background-dark z-40 flex flex-col items-center justify-center space-y-6 text-xl font-display transform translate-x-full transition-transform duration-300 md:hidden overflow-y-auto py-8">
        <a href="index.html#about" class="mobile-link text-white hover:text-mystic-gold">Philosophy</a>
        <a href="events.html" class="mobile-link text-white hover:text-mystic-gold">Events</a>
        <a href="blog.html" class="mobile-link text-white hover:text-mystic-gold">Community</a>
        
        <div class="flex flex-col items-center gap-3 w-full">
            <span class="text-mystic-gold font-bold">Kiss Your Heart</span>
            <div class="flex flex-col items-center gap-2 text-base text-white/80">
                <a href="services-artist.html" class="mobile-link hover:text-white">Artist</a>
                <a href="services-brand.html" class="mobile-link hover:text-white">Brand</a>
                <a href="services-individual.html" class="mobile-link hover:text-white">Individual</a>
                <a href="booking.html" class="mobile-link font-bold text-mystic-gold hover:text-white mt-1">Book Now</a>
                <a href="home_original.html#portfolio" class="mobile-link font-bold text-white hover:text-mystic-gold mt-1">Portfolio</a>
            </div>
        </div>

        <a href="outbreak_tunes.html" class="mobile-link text-white hover:text-mystic-gold">Outbreak Tunes</a>
        <a href="partners.html" class="mobile-link text-white hover:text-mystic-gold">Live on Stage Map</a>
        <a href="contact.html" class="mobile-link text-white hover:text-mystic-gold">Contact</a>
        <div class="h-px w-12 bg-white/20 my-2"></div>
        <a href="login.html" class="mobile-link text-lg text-white/60 hover:text-white">Member Login</a>
    </div>

    <main class="container mx-auto px-6 py-10 md:py-20">
        <!-- Header Section -->
        <div class="text-center mb-16">
            <div class="flex justify-center mb-4">
                <img src="Assets/images/logo.png" alt="Logo" class="h-16 w-auto opacity-80">
            </div>
            <h1 class="text-mystic-gold text-4xl font-black leading-tight tracking-[-0.033em] md:text-6xl mb-6">
                Services & Investment
            </h1>
            <a href="#pricing" class="inline-flex items-center justify-center px-8 py-3 text-base font-bold text-background-dark bg-mystic-gold rounded-lg hover:bg-white transition-colors shadow-lg shadow-mystic-gold/20">
                KLICK HERE FOR MORE INSIGHT
            </a>
        </div>

        <!-- Pricing Cards Section -->
        <section id="pricing" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <!-- Community Offer -->
            <div class="bg-background-dark/80 backdrop-blur-sm border border-white/10 rounded-xl p-8 hover:border-mystic-gold/30 transition-all group">
                <h3 class="text-mystic-gold text-xl font-bold mb-2">Community Flow</h3>
                <div class="text-4xl font-black text-white mb-4">FREE</div>
                <p class="text-white/70 text-sm mb-8 min-h-[60px] leading-relaxed">
                    A spontaneous 30-minute flow. Whether amidst the city's pulse, atop a breathtaking miradouro, or by the whispering sea—choose your spot and discover the magic we create together. A taste of the experience.
                </p>
                <button onclick="openBooking('Community Offer')" class="w-full py-3 rounded-lg border border-white/20 text-white font-bold hover:bg-white hover:text-background-dark transition-colors">
                    JOIN CIRCLE
                </button>
            </div>

            <!-- Standard Shooting -->
            <div class="bg-background-dark/80 backdrop-blur-sm border border-white/10 rounded-xl p-8 hover:border-mystic-gold/30 transition-all group">
                <h3 class="text-white text-xl font-bold mb-2">Standard Session</h3>
                <div class="flex items-baseline gap-1 mb-4">
                    <span class="text-4xl font-black text-primary">40€</span>
                    <span class="text-white/60">/ hour</span>
                </div>
                <p class="text-white/70 text-sm mb-8 min-h-[60px] leading-relaxed">
                    Capture the essence of the moment. We bring professional equipment and a keen eye to document your journey. You receive a generous collection of high-quality raw images, preserving the authenticity of your story.
                </p>
                <button onclick="openBooking('Standard Shooting')" class="w-full py-3 rounded-lg border border-white/20 text-white font-bold hover:bg-white hover:text-background-dark transition-colors">
                    BOOK NOW
                </button>
            </div>

            <!-- Full Package -->
            <div class="relative bg-background-dark/80 backdrop-blur-sm border border-primary rounded-xl p-8 shadow-lg shadow-primary/20 transform md:-translate-y-4">
                <div class="absolute top-0 right-0 bg-primary text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg">
                    Popular
                </div>
                <h3 class="text-white text-xl font-bold mb-2">Full Experience</h3>
                <div class="flex items-baseline gap-1 mb-4">
                    <span class="text-4xl font-black text-primary">65€</span>
                    <span class="text-white/60">/ hour</span>
                </div>
                <p class="text-white/70 text-sm mb-8 min-h-[60px] leading-relaxed">
                    The complete artistic vision. Includes everything from Standard, plus 5 edited images or video, and 30-day access to a private Google Photos & Lightroom folder. Earn reward points, and 25% supports the Association.
                </p>
                <button onclick="openBooking('Full Package')" class="w-full py-3 rounded-lg bg-primary text-white font-bold hover:bg-primary/90 transition-colors shadow-lg shadow-primary/30">
                    BOOK NOW
                </button>
            </div>
        </section>

        <!-- Additional Services Grid -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
            <!-- Studio Sessions -->
            <div class="bg-background-dark/50 backdrop-blur-sm border border-white/10 rounded-xl p-6">
                <h3 class="text-white/80 text-lg font-medium mb-1">Studio Sessions</h3>
                <div class="flex items-baseline gap-2 mb-3">
                    <span class="text-2xl font-bold text-primary">Hourly</span>
                    <span class="text-white/40 text-sm">+ Rental</span>
                </div>
                <p class="text-white/60 text-sm leading-relaxed">
                    Step into a realm of controlled light and shadow. A professional sanctuary where every detail is mastered, allowing your vision to emerge with crystal clarity.
                </p>
            </div>

            <!-- Creative Projects -->
            <div class="bg-background-dark/50 backdrop-blur-sm border border-white/10 rounded-xl p-6">
                <h3 class="text-white/80 text-lg font-medium mb-1">Creative Projects</h3>
                <div class="text-2xl font-bold text-primary mb-3">Custom</div>
                <p class="text-white/60 text-sm leading-relaxed">
                    Unleash the boundlessness of imagination. A collaborative journey where we weave your wildest concepts into reality, defying convention and embracing the extraordinary.
                </p>
            </div>

            <!-- Special Branding -->
            <div class="bg-background-dark/50 backdrop-blur-sm border border-white/10 rounded-xl p-6">
                <h3 class="text-white/80 text-lg font-medium mb-1">Special Branding</h3>
                <div class="text-2xl font-bold text-primary mb-3">Custom</div>
                <p class="text-white/60 text-sm leading-relaxed">
                    Elevate your essence. We craft more than just a logo; we forge a visual identity that resonates with your soul and speaks your truth to the world.
                </p>
            </div>
        </section>

        <!-- Booking Configuration Section -->
        <section id="booking-config" class="hidden max-w-4xl mx-auto bg-background-dark/80 backdrop-blur-md border border-primary/30 rounded-2xl p-8 md:p-12 shadow-2xl transition-all duration-500">
            <h2 class="text-3xl font-bold text-white mb-8 text-center">Customize Your Experience</h2>
            
            <!-- Step 2: Details & Duration -->
            <div id="step-details" class="space-y-10">
                <form id="booking-form" class="space-y-10">
                    <!-- Hour Selector -->
                    <div class="space-y-4">
                        <div class="flex justify-between items-end">
                            <label class="text-mystic-gold font-bold text-lg">Duration</label>
                            <span class="text-white text-2xl font-bold"><span id="hour-display">2</span> Hours</span>
                        </div>
                        <div class="relative pt-6 pb-2">
                            <input type="range" min="1" max="10" step="0.5" value="2" id="hour-slider" class="w-full">
                            <div class="flex justify-between text-white/40 text-xs mt-2 font-mono">
                                <span>1h</span>
                                <span>5.5h</span>
                                <span>10h</span>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Offer Form -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <label class="block">
                            <span class="text-white/80 text-sm font-medium mb-2 block">Your Name</span>
                            <input type="text" class="w-full bg-white/5 border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-primary transition-colors" placeholder="Enter your name">
                        </label>
                        <label class="block">
                            <span class="text-white/80 text-sm font-medium mb-2 block">Email Address</span>
                            <input type="email" class="w-full bg-white/5 border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-primary transition-colors" placeholder="Enter your email">
                        </label>
                        <label class="block md:col-span-2">
                            <span class="text-white/80 text-sm font-medium mb-2 block">Project Type</span>
                            <select id="project-type" class="w-full bg-white/5 border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-primary transition-colors">
                                <option value="standard" class="bg-background-dark">Standard Shooting</option>
                                <option value="full" class="bg-background-dark">Full Package</option>
                                <option value="creative" class="bg-background-dark">Creative Project (Custom)</option>
                                <option value="branding" class="bg-background-dark">Special Branding (Custom)</option>
                            </select>
                        </label>
                        <label class="block md:col-span-2">
                            <span class="text-white/80 text-sm font-medium mb-2 block">Message / Specific Requests</span>
                            <textarea class="w-full bg-white/5 border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-primary transition-colors h-32" placeholder="Tell us about your vision..."></textarea>
                        </label>
                    </div>

                    <!-- Total & Action -->
                    <div class="border-t border-white/10 pt-8 flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="text-center md:text-left">
                            <div class="text-white/60 text-sm mb-1">Estimated Total</div>
                            <div class="text-4xl font-black text-mystic-gold" id="total-price">80€</div>
                            <div class="text-xs text-white/40 mt-1">*Final price may vary for custom projects</div>
                        </div>
                        <button type="button" onclick="goToPayment()" class="w-full md:w-auto px-8 py-4 bg-gradient-to-r from-primary to-purple-600 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg shadow-primary/25 flex items-center justify-center gap-2">
                            Proceed to Payment
                            <span class="material-symbols-outlined">arrow_forward</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 3: Payment -->
            <div id="step-payment" class="hidden space-y-8 text-center">
                <div class="flex flex-col items-center gap-4">
                    <div class="size-16 rounded-full bg-primary/20 flex items-center justify-center text-primary mb-4">
                        <span class="material-symbols-outlined text-3xl">credit_card</span>
                    </div>
                    <h3 class="text-2xl font-bold text-white">Choose Payment Method</h3>
                    <p class="text-white/60 max-w-md mx-auto">Total: <span id="payment-amount" class="text-mystic-gold font-bold">80€</span></p>
                </div>
                
                <!-- Payment Methods Grid -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto">
                    <button onclick="selectPayment('card')" class="payment-opt p-4 border border-white/10 rounded-xl bg-white/5 hover:border-mystic-gold hover:bg-white/10 transition-all flex flex-col items-center gap-2 group">
                        <span class="material-symbols-outlined text-2xl text-white/60 group-hover:text-mystic-gold">credit_card</span>
                        <span class="text-sm font-bold text-white">Card</span>
                    </button>
                    <button onclick="selectPayment('mbway')" class="payment-opt p-4 border border-white/10 rounded-xl bg-white/5 hover:border-mystic-gold hover:bg-white/10 transition-all flex flex-col items-center gap-2 group">
                        <span class="material-symbols-outlined text-2xl text-white/60 group-hover:text-mystic-gold">smartphone</span>
                        <span class="text-sm font-bold text-white">MBWAY</span>
                    </button>
                    <button onclick="selectPayment('paypal')" class="payment-opt p-4 border border-white/10 rounded-xl bg-white/5 hover:border-mystic-gold hover:bg-white/10 transition-all flex flex-col items-center gap-2 group">
                        <span class="material-symbols-outlined text-2xl text-white/60 group-hover:text-mystic-gold">payments</span>
                        <span class="text-sm font-bold text-white">PayPal</span>
                    </button>
                    <button onclick="selectPayment('transfer')" class="payment-opt p-4 border border-white/10 rounded-xl bg-white/5 hover:border-mystic-gold hover:bg-white/10 transition-all flex flex-col items-center gap-2 group">
                        <span class="material-symbols-outlined text-2xl text-white/60 group-hover:text-mystic-gold">account_balance</span>
                        <span class="text-sm font-bold text-white">Transfer</span>
                    </button>
                </div>

                <!-- Payment Details (Dynamic) -->
                <div id="payment-details" class="max-w-md mx-auto p-6 border border-white/10 rounded-xl bg-white/5 min-h-[150px] flex flex-col justify-center items-center">
                    <p class="text-white/40 text-sm">Select a payment method above.</p>
                </div>

                <div class="flex justify-center gap-4">
                    <button onclick="showStep('step-details')" class="px-6 py-3 border border-white/20 rounded-lg text-white hover:bg-white/10 transition-colors">
                        Back
                    </button>
                    <button id="pay-btn" onclick="processPayment()" disabled class="px-8 py-3 bg-mystic-gold/50 text-background-dark font-bold rounded-lg cursor-not-allowed transition-colors shadow-lg shadow-mystic-gold/20">
                        Confirm Payment
                    </button>
                </div>
            </div>

            <!-- Step 4: Calendar -->
            <div id="step-calendar" class="hidden space-y-8 text-center">
                <div class="flex flex-col items-center gap-4">
                    <div class="size-16 rounded-full bg-green-500/20 flex items-center justify-center text-green-500 mb-4">
                        <span class="material-symbols-outlined text-3xl">check_circle</span>
                    </div>
                    <h3 class="text-2xl font-bold text-white">Payment Successful!</h3>
                    <p class="text-white/60 max-w-md mx-auto">Now, let's schedule your session. Please select a date and time from the calendar below.</p>
                </div>

                <!-- Calendar Placeholder -->
                <div class="max-w-2xl mx-auto aspect-video bg-white/5 border border-white/10 rounded-xl flex items-center justify-center">
                    <div class="text-center">
                        <span class="material-symbols-outlined text-4xl text-white/20 mb-2">calendar_month</span>
                        <p class="text-white/40">Calendar Integration Loading...</p>
                    </div>
                </div>

                <button onclick="finishBooking()" class="px-8 py-3 bg-primary text-white font-bold rounded-lg hover:bg-primary/90 transition-colors">
                    Confirm Schedule
                </button>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-background-dark border-t border-primary/20">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-1">
                    <div class="flex items-center gap-4 text-white mb-4">
                        <div class="size-6">
                            <img src="Assets/images/logo.png" alt="Circle D Flow Logo" class="w-full h-full object-contain">
                        </div>
                        <h2 class="text-white text-lg font-bold leading-tight">Circle D Flow</h2>
                    </div>
                    <p class="text-white/60 text-sm">Art, Science &amp; Community. Lisbon.</p>
                </div>
                <div>
                    <h4 class="font-bold text-mystic-gold mb-4">Navigation</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a class="text-white/80 hover:text-white" href="index.html#about">Philosophy</a></li>
                        <li><a class="text-white/80 hover:text-white" href="events.html">Events</a></li>
                        <li><a class="text-white/80 hover:text-white" href="blog.html">Circle D Flow</a></li>
                        <li><a class="text-white/80 hover:text-white" href="partners.html">Partners</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-mystic-gold mb-4">Services</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a class="text-white/80 hover:text-white" href="index.html">Kiss Your Heart</a></li>
                        <li><a class="text-white/80 hover:text-white" href="outbreak_tunes.html">Outbreak Tunes</a></li>
                        <li><a class="text-white/80 hover:text-white" href="index.html#portfolio">Portfolio</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-mystic-gold mb-4">Join the Flow</h4>
                    <p class="text-white/60 text-sm mb-4">Get updates on events and projects directly in your inbox.</p>
                    <form class="flex gap-2">
                        <input class="w-full bg-white/10 border-primary/50 text-white rounded-md text-sm focus:ring-mystic-gold focus:border-mystic-gold" placeholder="Your E-Mail" type="email"/>
                        <button class="h-10 px-4 bg-primary text-white font-bold rounded-md text-sm hover:opacity-90" type="submit">Send</button>
                    </form>
                </div>
            </div>
            <div class="mt-12 border-t border-primary/20 pt-8 text-center text-sm text-white/50">
                <p>© 2024 Circle D Flow. All rights reserved.</p>
            </div>
        </div>
    </footer>
</div>

<!-- Audio Player (Right) -->
<div class="fixed bottom-8 right-8 z-50">
    <button id="audio-btn" class="w-12 h-12 rounded-full border border-white/20 flex items-center justify-center hover:border-electric transition-colors bg-background-dark/50 backdrop-blur-sm">
        <svg id="audio-icon-on" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24" style="color: white;">
            <path d="M11.5 2C11.5 2 11.5 2 11.5 2C10.67 2 10 2.67 10 3.5C10 4.33 10.67 5 11.5 5C12.33 5 13 4.33 13 3.5C13 3.42 12.99 3.34 12.98 3.26C13.6 3.64 14 4.31 14 5.08C14 6.27 12.94 7.21 11.77 7.21C11.68 7.21 11.59 7.2 11.5 7.2C9.57 7.2 8 8.77 8 10.7C8 12.63 9.57 14.2 11.5 14.2C11.5 14.2 11.5 14.2 11.5 14.2C12.33 14.2 13 13.53 13 12.7C13 11.87 12.33 11.2 11.5 11.2C10.67 11.2 10 11.87 10 12.7C10 12.78 10.01 12.86 10.02 12.94C9.4 12.56 9 11.89 9 11.12C9 9.93 10.06 8.99 11.23 8.99C11.32 8.99 11.41 9 11.5 9C13.43 9 15 7.43 15 5.5C15 3.57 13.43 2 11.5 2ZM11.5 15.5C9.57 15.5 8 17.07 8 19C8 20.93 9.57 22.5 11.5 22.5C13.43 22.5 15 20.93 15 19C15 17.07 13.43 15.5 11.5 15.5ZM11.5 20.5C10.67 20.5 10 19.83 10 19C10 18.17 10.67 17.5 11.5 17.5C12.33 17.5 13 18.17 13 19C13 19.83 12.33 20.5 11.5 20.5Z"/>
        </svg>
        <svg id="audio-icon-off" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" style="color: white;">
            <path d="M11.5 2C11.5 2 11.5 2 11.5 2C10.67 2 10 2.67 10 3.5C10 4.33 10.67 5 11.5 5C12.33 5 13 4.33 13 3.5C13 3.42 12.99 3.34 12.98 3.26C13.6 3.64 14 4.31 14 5.08C14 6.27 12.94 7.21 11.77 7.21C11.68 7.21 11.59 7.2 11.5 7.2C9.57 7.2 8 8.77 8 10.7C8 12.63 9.57 14.2 11.5 14.2C11.5 14.2 11.5 14.2 11.5 14.2C12.33 14.2 13 13.53 13 12.7C13 11.87 12.33 11.2 11.5 11.2C10.67 11.2 10 11.87 10 12.7C10 12.78 10.01 12.86 10.02 12.94C9.4 12.56 9 11.89 9 11.12C9 9.93 10.06 8.99 11.23 8.99C11.32 8.99 11.41 9 11.5 9C13.43 9 15 7.43 15 5.5C15 3.57 13.43 2 11.5 2ZM11.5 15.5C9.57 15.5 8 17.07 8 19C8 20.93 9.57 22.5 11.5 22.5C13.43 22.5 15 20.93 15 19C15 17.07 13.43 15.5 11.5 15.5ZM11.5 20.5C10.67 20.5 10 19.83 10 19C10 18.17 10.67 17.5 11.5 17.5C12.33 17.5 13 18.17 13 19C13 19.83 12.33 20.5 11.5 20.5Z" opacity="0.3"/>
            <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2"/>
        </svg>
    </button>
    <audio id="bg-music" loop>
        <source src="Assets/audio/ambient.mp3" type="audio/mpeg">
    </audio>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- CONFIGURATION ---
    const paymentConfig = {
        // Manual Payment Details
        mbway: "+351 962 941 775", // REPLACE with your number
        paypal: "circle.d.flow@gmail.com", // REPLACE with your email
        paypalLink: "https://paypal.me/circledflow", // REPLACE with your link
        iban: "PT50 0033 0000 4580 3280 3030 5", // REPLACE with your IBAN
        beneficiary: "Koamigan Bruce",

        // Stripe Payment Links (Create these in your Stripe Dashboard)
        stripeLinks: {
            'standard': 'https://buy.stripe.com/test_aFa7sLdS7bmW37E8Pacs802', // REPLACE with actual link
            'full': 'https://book.stripe.com/test_4gM14n3dt1MmgYu4yUcs801',         // REPLACE with actual link
            'custom': '' // Custom amounts usually need a manual invoice
        }
    };

    // Initialize Supabase safely
    let supabase = null;
    try {
        const supabaseUrl = 'https://ylxghoyjmwkrulijkocy.supabase.co';
        const supabaseKey = 'sb_publishable_Mr5qm2GKIlU25Lw-0gtJlw_aBjbXju_';
        if (window.supabase) {
            supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
        } else {
            console.error('Supabase library not loaded. Check your internet connection.');
        }
    } catch (e) {
        console.error('Supabase initialization failed:', e);
    }

    // Audio Player Logic
    const audioBtn = document.getElementById('audio-btn');
    const bgMusic = document.getElementById('bg-music');
    const iconOn = document.getElementById('audio-icon-on');
    const iconOff = document.getElementById('audio-icon-off');

    // Try to restore state
    const isPlaying = localStorage.getItem('musicPlaying') === 'true';
    if (isPlaying) {
        bgMusic.play().then(() => {
            iconOn.classList.remove('hidden');
            iconOff.classList.add('hidden');
        }).catch(() => {
            console.log("Autoplay blocked");
        });
    }

    if (audioBtn) {
        audioBtn.addEventListener('click', () => {
            if (bgMusic.paused) {
                bgMusic.play();
                iconOn.classList.remove('hidden');
                iconOff.classList.add('hidden');
                localStorage.setItem('musicPlaying', 'true');
            } else {
                bgMusic.pause();
                iconOn.classList.add('hidden');
                iconOff.classList.remove('hidden');
                localStorage.setItem('musicPlaying', 'false');
            }
        });
    }

    // Mobile Menu Toggle
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    let isMenuOpen = false;

    if (menuBtn) {
        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenu.classList.remove('translate-x-full');
                menuBtn.innerHTML = '<span class="material-symbols-outlined">close</span>';
            } else {
                mobileMenu.classList.add('translate-x-full');
                menuBtn.innerHTML = '<span class="material-symbols-outlined">menu</span>';
            }
        });
    }

    // Booking Logic
    const slider = document.getElementById('hour-slider');
    const hourDisplay = document.getElementById('hour-display');
    const totalPriceDisplay = document.getElementById('total-price');
    const paymentAmountDisplay = document.getElementById('payment-amount');
    const projectTypeSelect = document.getElementById('project-type');

    const rates = {
        'standard': 40,
        'full': 65,
        'creative': 0, // Custom
        'branding': 0  // Custom
    };

    // Expose functions to global scope
    window.updatePrice = function() {
        if (!slider || !projectTypeSelect) return;

        const hours = parseFloat(slider.value);
        const type = projectTypeSelect.value;
        const rate = rates[type] || 0;
        
        if (hourDisplay) hourDisplay.textContent = hours;
        
        if (rate === 0) {
            if (totalPriceDisplay) totalPriceDisplay.textContent = "Custom";
            if (paymentAmountDisplay) paymentAmountDisplay.textContent = "Custom";
        } else {
            const total = hours * rate;
            if (totalPriceDisplay) totalPriceDisplay.textContent = total + '€';
            if (paymentAmountDisplay) paymentAmountDisplay.textContent = total + '€';
        }
    }

    if (slider) slider.addEventListener('input', window.updatePrice);
    if (projectTypeSelect) projectTypeSelect.addEventListener('change', window.updatePrice);

    window.showStep = function(stepId) {
        // Hide all steps
        document.getElementById('step-details').classList.add('hidden');
        document.getElementById('step-payment').classList.add('hidden');
        document.getElementById('step-calendar').classList.add('hidden');
        
        // Show target step
        const step = document.getElementById(stepId);
        if (step) step.classList.remove('hidden');
    }

    window.openBooking = function(packageName) {
        const configSection = document.getElementById('booking-config');
        if (!configSection) return;

        configSection.classList.remove('hidden');
        configSection.scrollIntoView({ behavior: 'smooth' });
        
        // Reset to step 1
        window.showStep('step-details');

        // Pre-select package
        const select = document.getElementById('project-type');
        if (select) {
            if (packageName === 'Standard Shooting') select.value = 'standard';
            if (packageName === 'Full Package') select.value = 'full';
            if (packageName === 'Community Offer') select.value = 'creative';
            
            // Update price immediately
            window.updatePrice();
        }
    }

    window.goToPayment = function() {
        window.showStep('step-payment');
    }

    let selectedPaymentMethod = '';

    window.selectPayment = function(method) {
        selectedPaymentMethod = method;
        const details = document.getElementById('payment-details');
        const payBtn = document.getElementById('pay-btn');
        
        if (!details || !payBtn) return;

        // Reset styles
        document.querySelectorAll('.payment-opt').forEach(el => el.classList.remove('border-mystic-gold', 'bg-white/10'));
        // Highlight selected (visual fix would require passing event or ID, skipping for logic fix)
        
        payBtn.disabled = false;
        payBtn.classList.remove('bg-mystic-gold/50', 'cursor-not-allowed');
        payBtn.classList.add('bg-mystic-gold', 'hover:bg-white');

        if (method === 'card') {
            details.innerHTML = `
                <div class="text-center">
                    <p class="text-white font-bold mb-2">Credit Card (Stripe)</p>
                    <p class="text-white/60 text-sm">You will be redirected to a secure Stripe Checkout page.</p>
                </div>
            `;
            payBtn.innerText = "Proceed to Stripe";
        } else if (method === 'mbway') {
            details.innerHTML = `
                <div class="text-center">
                    <p class="text-white font-bold mb-2">MBWAY</p>
                    <p class="text-white/60 text-sm mb-2">Send payment to:</p>
                    <p class="text-2xl font-mono text-mystic-gold">${paymentConfig.mbway}</p>
                    <p class="text-white/40 text-xs mt-2">Please include your name in the description.</p>
                </div>
            `;
            payBtn.innerText = "I have sent the payment";
        } else if (method === 'paypal') {
            details.innerHTML = `
                <div class="text-center">
                    <p class="text-white font-bold mb-2">PayPal</p>
                    <p class="text-white/60 text-sm mb-2">Send payment to:</p>
                    <p class="text-lg font-mono text-mystic-gold">${paymentConfig.paypal}</p>
                    <a href="${paymentConfig.paypalLink}" target="_blank" class="text-primary hover:underline text-sm mt-2 block">Open PayPal Me</a>
                </div>
            `;
            payBtn.innerText = "I have sent the payment";
        } else if (method === 'transfer') {
            details.innerHTML = `
                <div class="text-center">
                    <p class="text-white font-bold mb-2">Bank Transfer</p>
                    <p class="text-white/60 text-sm mb-1">IBAN:</p>
                    <p class="text-sm font-mono text-mystic-gold break-all">${paymentConfig.iban}</p>
                    <p class="text-white/60 text-sm mt-2">Beneficiary: ${paymentConfig.beneficiary}</p>
                </div>
            `;
            payBtn.innerText = "I have sent the payment";
        }
    }

    window.processPayment = function() {
        if (!selectedPaymentMethod) return;

        const btn = document.getElementById('pay-btn');
        const originalText = btn.innerText;
        btn.innerText = 'Processing...';
        btn.disabled = true;

        if (selectedPaymentMethod === 'card') {
            // Redirect to Stripe Payment Link
            const projectType = document.getElementById('project-type');
            if (!projectType) return;
            
            const link = paymentConfig.stripeLinks[projectType.value] || paymentConfig.stripeLinks['custom'];
            
            if (link) {
                window.location.href = link;
                return; // Stop here, redirecting
            } else {
                // FALLBACK for missing links (e.g. Custom / Community Offer)
                alert("This package requires manual confirmation. Please proceed to schedule your session.");
                // Proceed to calendar as if it was a manual payment
            }
        }
        
        // For manual methods or fallback, proceed to calendar
        setTimeout(() => {
            btn.innerText = originalText;
            btn.disabled = false;
            window.showStep('step-calendar');
        }, 1500);
    }

    window.finishBooking = async function() {
        const btn = document.querySelector('#step-calendar button');
        const originalText = btn.innerText;
        btn.innerText = 'Saving...';
        btn.disabled = true;

        const nameInput = document.querySelector('input[placeholder="Enter your name"]');
        const emailInput = document.querySelector('input[placeholder="Enter your email"]');
        const projectType = document.getElementById('project-type');
        const slider = document.getElementById('hour-slider');
        const totalPrice = document.getElementById('total-price');

        // Gather Data (Safely)
        const bookingData = {
            name: nameInput ? nameInput.value : 'Unknown',
            email: emailInput ? emailInput.value : 'Unknown',
            service_type: projectType ? projectType.value : 'standard',
            duration: slider ? parseInt(slider.value) : 2,
            total_price: totalPrice ? parseInt(totalPrice.innerText.replace('€', '') || 0) : 0,
            status: 'confirmed'
        };

        if (!supabase) {
            console.warn("Supabase not initialized, skipping database save.");
            alert("Payment successful! (Note: Database unavailable, please contact us directly if you don't receive an email)");
            document.getElementById('booking-config').classList.add('hidden');
            btn.innerText = originalText;
            btn.disabled = false;
            return;
        }

        try {
            const { data, error } = await supabase
                .from('bookings')
                .insert([bookingData]);

            if (error) throw error;

            alert("Booking Confirmed! You have been added to our database.");
            document.getElementById('booking-config').classList.add('hidden');
        } catch (error) {
            console.error('Error saving booking:', error);
            alert("There was an error saving your booking details, but your payment is noted. Please contact us.");
        } finally {
            btn.innerText = originalText;
            btn.disabled = false;
        }
    }

}); // End DOMContentLoaded
</script>

</body>
</html>
